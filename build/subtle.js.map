{"version":3,"sources":["webpack:///webpack/bootstrap d744963334b236b37831","webpack:///./src/utils/storage.js","webpack:///./src/utils/Constants.js","webpack:///./src/subtle.js"],"names":["storage","get","key","value","localStorage","getItem","isNaN","JSON","parse","set","constants","SYNC","indexOf","obj","console","log","chrome","sync","setItem","stringify","setLocal","remove","removeItem","increment","item","append","initialValue","push","getMap","setMap","data","chromeSync","callback","details","THEME","NATURE","ARCHITECTURE","TRAVEL","NIGHT","STORAGE","SHARED_DATA","WEATHER","BACKGROUND_SEEN","CURRENT_PAGE","SEEN_ONBOARDING","tabsCount","prevTabsCount","bgData","DEBUG","getTabsCount","setTabsCount","num","filterResponses","response","photo","photoKeys","Object","keys","photos","storedSeenIds","result","i","length","runtime","onMessage","addListener","request","sender","sendResponse","query","getBackground","theme","newPage","loadNextBackground","url","loadCurrentBackground","_console","startWeather","defaultImageLoaded","img","Image","src","onload","clearTimeout","defaultImageTimeout","setTimeout","changePage","Promise","resolve","reject","xmlhttp","XMLHttpRequest","currentPage","themePage","tags","open","setRequestHeader","btoa","id","onreadystatechange","readyState","status","responseText","pages","updateThemeStorage","onerror","send","themeLocalStorage","allKeys","lastURLKey","lastStoredURL","assign","previousURL","image","onInstalled","reason","hasOwnProperty","tabs","create","browserAction","onClicked","tab","onChanged","changes","namespace","newValue","getWeather","lat","long","weather","now","Date","localWeather","temp","alt","code","city","loadWeather","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","timeout","weatherInterval","localSettings","showUtilities","showWeather","setInterval","onLine","stopWeather","clearInterval","init","setUninstallURL","onCreated"],"mappings":"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","file":"subtle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d744963334b236b37831","import constants from './Constants';\n\nlet storage = {\n    get(key){\n        let value = localStorage.getItem(key);\n        return isNaN(value) ? JSON.parse(value) : value;\n    },\n    set(key, value){\n        if (constants.SYNC.indexOf(key) > -1 && localStorage.getItem('sync')) {\n            let obj = {};\n            obj[key] = value;\n            console.log(obj);\n            chrome.storage.sync.set(obj);\n        } else {\n            localStorage.setItem(key, JSON.stringify(value));\n        }\n    },\n    setLocal(key, value){\n        localStorage.setItem(key, JSON.stringify(value));\n    },\n    remove(key){\n        return localStorage.removeItem(key);\n    },\n    increment(key){\n        let item = this.get(key);\n        if (typeof item === 'number') {\n            this.set(key, item + 1)\n        }\n    },\n    append(key, value){\n        let initialValue = this.get(key) || [];\n        initialValue.push(value);\n        this.set(key, initialValue);\n    },\n    getMap(key){\n        let value = localStorage.getItem(key);\n        return isNaN(value) ? JSON.parse(value) : value;\n    },\n    setMap(key, data){\n        return localStorage.setItem(key, JSON.stringify(data));\n    },\n    chromeSync: {\n        get(key, callback){\n            chrome.storage.sync.get(key, (details) => {\n                callback(details);\n            });\n        },\n        set(key, value, callback){\n            chrome.storage.sync.set({key: value}, (details) => {\n                callback(details);\n            });\n        }\n    }\n\n};\nexport default storage;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/storage.js","export default {\n    THEME: {\n        NATURE: 'nature',\n        ARCHITECTURE: 'building',\n        TRAVEL: 'travel',\n        NIGHT: 'night'\n    },\n    STORAGE: {\n        SHARED_DATA: 'shared-data',\n        WEATHER: 'weather',\n        BACKGROUND_SEEN: 'bg-seen',\n        CURRENT_PAGE: 'current-page',\n        SEEN_ONBOARDING: 'seen-onboarding'\n    },\n    SYNC: [\n        'shared-data', 'bg-seen', 'current-page'\n    ]\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Constants.js","import storage from './utils/storage';\nimport constants from './utils/Constants';\n\nlet tabsCount = 0;\nlet prevTabsCount = 0;\nlet bgData;\nconst DEBUG = false;\n\nfunction getTabsCount() {\n    return prevTabsCount === tabsCount ? false : tabsCount;\n}\n\nfunction setTabsCount(num) {\n    tabsCount = num;\n}\n\nfunction filterResponses(response) {\n    if (response && response.photo) {\n        let photoKeys = Object.keys(response.photo);\n        let photos = response.photo;\n        let storedSeenIds = storage.get(constants.STORAGE.BACKGROUND_SEEN) || [];\n        let result = {};\n        for (let i = 0; i < photoKeys.length; i++) {\n            if (storedSeenIds.indexOf(photos[photoKeys[i]]) === -1) {\n                result[photoKeys[i]] = photos[photoKeys[i]];\n            }\n        }\n        return result;\n    }\n}\nchrome.runtime.onMessage.addListener(\n    (request, sender, sendResponse) => {\n        if (request.query === 'getBackground') {\n            getBackground(request.theme, request.newPage);\n        }\n        else if (request.query === 'getTabsCount') {\n            sendResponse(getTabsCount());\n        } else if (request.query === 'setTabsCount') {\n            setTabsCount(request.value);\n            sendResponse(true);\n        } else if (request.query === 'loadNextBackground') {\n            loadNextBackground(request.url);\n        } else if (request.query === 'loadCurrentBackground') {\n            loadCurrentBackground(request.url, sendResponse);\n        } else if (request.query === 'log') {\n            _console(request.value);\n        } else if (request.query === 'startWeather') {\n            startWeather();\n        }\n        return true;\n    });\n\nlet loadCurrentBackground = (url, callback) => {\n    let defaultImageLoaded = false;\n    let img = new Image();\n    img.src = url;\n    img.onload = () => {\n        if (!defaultImageLoaded) {\n            clearTimeout(defaultImageTimeout);\n            callback(url);\n        }\n    };\n    let defaultImageTimeout = setTimeout(() => {\n        defaultImageLoaded = true;\n        callback(false);\n    }, 2500);\n};\n\nlet getBackground = (theme, changePage) => {\n    return new Promise((resolve, reject) => {\n        let xmlhttp = new XMLHttpRequest();\n        let currentPage = storage.get(constants.STORAGE.CURRENT_PAGE) || {};\n        let themePage = currentPage[theme.value] || 0;\n\n        if (changePage) {\n            themePage++;\n        }\n\n        let url = 'http://api.subtletab.com/theme/';\n        url += theme.tags + '/' + themePage;\n        xmlhttp.open('GET', url);\n        xmlhttp.setRequestHeader('chrome-extension', btoa(chrome.runtime.id));\n        xmlhttp.onreadystatechange = function () {\n            if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {\n                let response = JSON.parse(xmlhttp.responseText);\n                //responses will be other than seen, having good views and sizes\n                bgData = filterResponses(response);\n                //If all pages are empty;\n                if (themePage === response.pages) {\n                    themePage = 0;\n                }\n                currentPage[theme.value] = themePage;\n                storage.set(constants.STORAGE.CURRENT_PAGE, currentPage);\n\n                updateThemeStorage(bgData, theme);\n                resolve();\n            }\n        };\n        xmlhttp.onerror = () => {\n            reject(xmlhttp.status);\n        };\n        xmlhttp.send();\n    });\n};\n\nlet updateThemeStorage = (bgData, theme) => {\n    let themeLocalStorage = storage.get(constants.THEME[theme.value]);\n    if (!themeLocalStorage) {\n        storage.set(theme.value, bgData);\n        return;\n    }\n    let allKeys = Object.keys(themeLocalStorage);\n    let lastURLKey = allKeys[allKeys.length];\n\n    let lastStoredURL = themeLocalStorage[lastURLKey];\n    // Storing last background url for next round;\n    let obj = {};\n    obj[lastURLKey] = lastStoredURL;\n\n    storage.set(theme.value, Object.assign({}, obj, bgData));\n};\n\nlet previousURL;\nlet loadNextBackground = function (url) {\n    previousURL = previousURL || url;\n    if (previousURL !== url) {\n        _console('BG: Load Next Background for', url);\n        previousURL = url;\n        let image = new Image();\n        image.src = url;\n    }\n};\n\nlet _console = (log) => {\n    if (DEBUG) {\n        console.log(log);\n    }\n};\n\nchrome.runtime.onInstalled.addListener(function (details) {\n    if (details && details.reason && details.reason === 'install') {\n        storage.chromeSync.get(null, (details) => {\n            let key;\n            for (key in details) {\n                if (!details.hasOwnProperty(key)) {\n                    continue;\n                }\n                storage.setLocal(key, details[key]);\n            }\n        });\n\n        chrome.tabs.create({});\n\n    } else if (details && details.reason && details.reason === 'update') {\n        //storage.set(constants.STORAGE.SEEN_ONBOARDING, false);\n        //chrome.tabs.create({});\n    }\n});\n\nchrome.browserAction.onClicked.addListener(function (tab) {\n    chrome.tabs.create({});\n});\n\nchrome.storage.onChanged.addListener((changes, namespace) => {\n\n    let key;\n    for (key in changes) {\n        if (!changes.hasOwnProperty(key)) {\n            continue;\n        }\n        _console(\"Storage Changed\" + JSON.stringify(changes[key]));\n        storage.setLocal(key, changes[key].newValue);\n    }\n\n});\n\n\nfunction getWeather(lat, long) {\n    let xmlhttp = new XMLHttpRequest();\n\n    let url = 'http://api.subtletab.com/weather/';\n    url += '?lat=' + lat + '&long=' + long;\n\n    xmlhttp.open('GET', url);\n    xmlhttp.setRequestHeader('chrome-extension', btoa(chrome.runtime.id));\n    xmlhttp.onreadystatechange = () => {\n        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {\n            let weather = JSON.parse(xmlhttp.responseText);\n            let now = +new Date();\n            let localWeather = [now, weather.temp, weather.alt.temp, weather.code, weather.city];\n            storage.set('weather', localWeather);\n        }\n    };\n    xmlhttp.send();\n}\nfunction loadWeather() {\n    navigator.geolocation.getCurrentPosition((position) => {\n            getWeather(position.coords.latitude, position.coords.longitude);\n        }, (error) => {\n            _console(error)\n        }, {timeout: 10000}\n    );\n\n}\nlet weatherInterval;\nfunction startWeather() {\n\n    let localSettings = storage.get(constants.STORAGE.SHARED_DATA);\n    if (localSettings && localSettings.showUtilities.showWeather) {\n        if (!weatherInterval) {\n            weatherInterval = setInterval(() => {\n                if (navigator.onLine) {\n                    loadWeather();\n                } else {\n                    stopWeather();\n                }\n            }, 300000)\n        }\n    } else {\n        stopWeather();\n    }\n\n}\n\nfunction stopWeather() {\n    clearInterval(weatherInterval);\n}\nfunction init() {\n\n    chrome.runtime.setUninstallURL('https://goo.gl/forms/hMD1i4sXIUVwkKtD2');\n\n    chrome.tabs.onCreated.addListener(function () {\n        prevTabsCount = tabsCount;\n        tabsCount++;\n        if (tabsCount === 2) {\n            storage.set(constants.STORAGE.SEEN_ONBOARDING, true);\n        }\n    });\n}\ninit();\n\n\n// WEBPACK FOOTER //\n// ./src/subtle.js"],"sourceRoot":""}