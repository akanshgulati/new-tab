{"version":3,"sources":["webpack:///webpack/bootstrap 15cd717b6b46cec2b67b","webpack:///./src/utils/Constants.js","webpack:///./src/utils/storage.js","webpack:///./src/subtle.js","webpack:///./src/utils/backgroundData.js","webpack:///./src/utils/common.js","webpack:///./src/utils/config.js"],"names":["BASE_API","constants","THEME","NATURE","ARCHITECTURE","TRAVEL","NIGHT","STORAGE","SHARED_DATA","MISC_SETTINGS","WEATHER","BACKGROUND_SEEN_NIGHT","BACKGROUND_SEEN_TRAVEL","BACKGROUND_SEEN_BUILDING","BACKGROUND_SEEN_NATURE","BACKGROUND_CUSTOM","BACKGROUND_SEEN_CUSTOM","CURRENT_PAGE","SEEN_ONBOARDING","NOTES_META","WHATS_NEW","CURRENT_CUSTOMIZATION_TAB","SYNC","URL","storage","get","key","value","localStorage","getItem","JSON","parse","set","undefined","indexOf","obj","chrome","sync","setItem","stringify","setLocal","remove","removeItem","increment","item","append","initialValue","push","getMap","isNaN","setMap","data","chromeSync","callback","details","e","console","log","tabsCount","prevTabsCount","bgData","DEBUG","getTabsCount","setTabsCount","num","filterResponses","response","photo","photoKeys","Object","keys","photos","storedSeenIds","BACKGROUND_SEEN","result","i","length","runtime","onMessage","addListener","request","sender","sendResponse","query","getBackground","theme","newPage","loadNextBackground","url","loadCurrentBackground","_console","startWeather","loadCurrentCustomBackground","defaultImageLoaded","img","Image","src","onload","clearTimeout","defaultImageTimeout","onerror","setTimeout","changePage","Promise","resolve","reject","currentPage","themePage","tags","CommonUtils","http","then","pages","toUpperCase","updateThemeStorage","error","themeLocalStorage","allKeys","lastURLKey","lastStoredURL","assign","previousURL","image","onInstalled","reason","hasOwnProperty","tabs","create","updateLocalStorage","browserAction","onClicked","tab","onChanged","changes","namespace","newValue","getWeather","type","lat","long","location","weather","loadWeather","settings","options","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","timeout","name","weatherInterval","localSettings","showUtilities","showWeather","setInterval","onLine","stopWeather","clearInterval","sharedData","miscSettings","isObject","isUndefined","storedWeather","config","defaultCustomization","city","showNotes","background","backgroundData","customBackgrounds","update","isToBeFetched","lastChecked","init","setUninstallURL","onCreated","themes","id","lValue","imgUrl","stored","method","xmlhttp","XMLHttpRequest","open","setRequestHeader","btoa","onreadystatechange","readyState","responseText","status","send","prototype","toString","call","isArray","showClock","clock","showTwelveHour","showDay","unit","themeId","changeInterval","misc","isSeen","other","showWeatherInfo"],"mappings":"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","file":"firefox/subtle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 51);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 15cd717b6b46cec2b67b","const BASE_API = 'https://api.subtletab.com/'\nconst constants = {\n    THEME: {\n        NATURE: 'nature',\n        ARCHITECTURE: 'building',\n        TRAVEL: 'travel',\n        NIGHT: 'night'\n    },\n    STORAGE: {\n        SHARED_DATA: 'shared-data',\n        MISC_SETTINGS: 'misc_settings',\n        WEATHER: 'weather',\n\n        BACKGROUND_SEEN_NIGHT: 'bg-seen-night',\n        BACKGROUND_SEEN_TRAVEL: 'bg-seen-travel',\n        BACKGROUND_SEEN_BUILDING: 'bg-seen-building',\n        BACKGROUND_SEEN_NATURE: 'bg-seen-nature',\n        BACKGROUND_CUSTOM: 'bg-custom',\n        BACKGROUND_SEEN_CUSTOM: 'bg-seen-custom',\n\n        CURRENT_PAGE: 'current-page',\n        SEEN_ONBOARDING: 'seen-onboarding',\n        NOTES_META: 'notes_meta',\n        WHATS_NEW: 'whats_new',\n        CURRENT_CUSTOMIZATION_TAB: 'current_c_tab'\n    },\n    SYNC: [\n        'shared-data', 'bg-seen-nature', 'bg-seen-night', 'bg-seen-travel', 'bg-seen-building', 'current-page', 'nature', 'travel', 'building', 'night',\n        'notes_meta', 'notes-', 'bg-custom', 'bg-seen-custom', 'misc_settings'\n    ],\n    URL : {\n        WHATS_NEW : BASE_API + 'whatsnew'\n    }\n};\n\nexport default constants\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Constants.js","import constants from './Constants';\n\nlet storage = {\n    get(key){\n        if(!key){\n            return\n        }\n        let value = localStorage.getItem(key);\n        return JSON.parse(value);\n    },\n    set(key, value){\n        if (!key || value === undefined || value === null) {\n            return\n        }\n        if (constants.SYNC.indexOf(key) > -1 || key.indexOf('note-') > -1) {\n            let obj = {};\n            obj[key] = value;\n            chrome.storage.sync.set(obj);\n        }\n        localStorage.setItem(key, JSON.stringify(value));\n    },\n    setLocal(key, value){\n        if (!key || value === undefined || value === null) {\n            return\n        }\n        localStorage.setItem(key, JSON.stringify(value));\n    },\n    remove(key){\n        return localStorage.removeItem(key);\n    },\n    increment(key){\n        let item = this.get(key);\n        if (typeof item === 'number') {\n            this.set(key, item + 1)\n        }\n    },\n    append(key, value){\n        let initialValue = this.get(key) || [];\n        initialValue.push(value);\n        this.set(key, initialValue);\n    },\n    getMap(key){\n        let value = localStorage.getItem(key);\n        return isNaN(value) ? JSON.parse(value) : value;\n    },\n    setMap(key, data){\n        return localStorage.setItem(key, JSON.stringify(data));\n    },\n    chromeSync: {\n        get(key, callback){\n            try {\n                chrome.storage.sync.get(key, (details) => {\n                    if(callback) {\n                        callback(details);\n                    }\n                });\n            } catch (e) {\n                console.log(e);\n            }\n        },\n        set(key, value, callback){\n            try {\n                let obj = {};\n                obj[key] = value;\n                chrome.storage.sync.set(obj, (details) => {\n                    if(callback) {\n                        callback(details);\n                    }\n                });\n            } catch (e) {\n                console.log(e);\n            }\n        }\n    }\n\n};\nexport default storage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/storage.js","import storage from './utils/storage';\nimport constants from './utils/Constants';\nimport config from './utils/config'\nimport backgroundData from './utils/backgroundData'\nimport CommonUtils from './utils/common'\n\nlet tabsCount = 0;\nlet prevTabsCount = 0;\nlet bgData;\nconst DEBUG = false;\n\nfunction getTabsCount() {\n    return prevTabsCount === tabsCount ? false : tabsCount;\n}\n\nfunction setTabsCount(num) {\n    tabsCount = num;\n}\n\nfunction filterResponses(response) {\n    if (response && response.photo) {\n        let photoKeys = Object.keys(response.photo);\n        let photos = response.photo;\n        let storedSeenIds = storage.get(constants.STORAGE.BACKGROUND_SEEN) || [];\n        let result = {};\n        for (let i = 0; i < photoKeys.length; i++) {\n            if (storedSeenIds.indexOf(photos[photoKeys[i]]) === -1) {\n                result[photoKeys[i]] = photos[photoKeys[i]];\n            }\n        }\n        return result;\n    }\n}\nchrome.runtime.onMessage.addListener(\n    (request, sender, sendResponse) => {\n        if (request.query === 'getBackground') {\n            getBackground(request.theme, request.newPage);\n        }\n        else if (request.query === 'getTabsCount') {\n            sendResponse(getTabsCount());\n        } else if (request.query === 'setTabsCount') {\n            setTabsCount(request.value);\n            sendResponse(true);\n        } else if (request.query === 'loadNextBackground') {\n            loadNextBackground(request.url);\n        } else if (request.query === 'loadCurrentBackground') {\n            loadCurrentBackground(request.url, sendResponse);\n        } else if (request.query === 'log') {\n            _console(request.value);\n        } else if (request.query === 'startWeather') {\n            startWeather();\n        } else if (request.query === 'loadCurrentCustomBackground'){\n            loadCurrentCustomBackground(request.url, sendResponse);\n        } else if (request.query === 'loadNextCustomBackground'){\n            loadNextBackground(request.url)\n        }\n        return true;\n    });\n\nlet loadCurrentBackground = (url, callback) => {\n    let defaultImageLoaded = false;\n    let img = new Image();\n    img.src = url;\n    img.onload = () => {\n        if (!defaultImageLoaded) {\n            clearTimeout(defaultImageTimeout);\n            callback(url);\n        }\n    };\n    img.onerror = () => {\n        clearTimeout(defaultImageTimeout);\n        defaultImageLoaded = true;\n        callback(false);\n    };\n\n    let defaultImageTimeout = setTimeout(() => {\n        defaultImageLoaded = true;\n        callback(false);\n    }, 2000);\n};\nlet loadCurrentCustomBackground = (url, callback) => {\n    let defaultImageLoaded = false;\n    let img = new Image();\n    img.src = url;\n    img.onload = () => {\n        if (!defaultImageLoaded) {\n            clearTimeout(defaultImageTimeout);\n            callback(url);\n        }\n    };\n    img.onerror = () => {\n        clearTimeout(defaultImageTimeout);\n        defaultImageLoaded = true;\n        callback(false);\n    };\n    let defaultImageTimeout = setTimeout(() => {\n        defaultImageLoaded = true;\n        callback(false);\n    }, 4000);\n};\nlet getBackground = (theme, changePage) => {\n    return new Promise((resolve, reject) => {\n        let currentPage = storage.get(constants.STORAGE.CURRENT_PAGE) || {};\n            let themePage = currentPage[theme.value] || 0;\n\n        if (changePage) {\n            themePage++;\n        }\n\n        let url = 'https://api.subtletab.com/theme/';\n        url += theme.tags + '/' + themePage;\n\n        CommonUtils.http(url).then((response)=>{\n            //responses will be other than seen, having good views and sizes\n            bgData = filterResponses(response);\n            //If all pages are empty;\n            if (themePage === response.pages) {\n                themePage = 0;\n            }\n\n            if (changePage) {\n                storage.set(constants.STORAGE['BACKGROUND_SEEN_' + theme.value.toUpperCase()], '');\n            }\n            currentPage[theme.value] = themePage;\n            storage.set(constants.STORAGE.CURRENT_PAGE, currentPage);\n\n            updateThemeStorage(bgData, theme);\n            resolve();\n        }, (error)=>{\n            reject(error);\n        })\n    });\n};\n\nlet updateThemeStorage = (bgData, theme) => {\n    let themeLocalStorage = storage.get(constants.THEME[theme.value]);\n    if (!themeLocalStorage) {\n        storage.set(theme.value, bgData);\n        return;\n    }\n    let allKeys = Object.keys(themeLocalStorage);\n    let lastURLKey = allKeys[allKeys.length];\n    let lastStoredURL = themeLocalStorage[lastURLKey];\n    // Storing last background url for next round;\n    let obj = {};\n    obj[lastURLKey] = lastStoredURL;\n    storage.set(theme.value, Object.assign({}, obj, bgData));\n};\n\nlet previousURL;\nlet loadNextBackground = function (url) {\n    previousURL = previousURL || url;\n    if (previousURL !== url) {\n        _console('BG: Load Next Background for', url);\n        previousURL = url;\n        let image = new Image();\n        image.src = url;\n    }\n};\n\nlet _console = (log) => {\n    if (DEBUG) {\n        console.log(log);\n    }\n};\n\nchrome.runtime.onInstalled.addListener(function (details) {\n    if (details && details.reason && details.reason === 'install') {\n        storage.chromeSync.get(null, (details) => {\n            let key;\n            for (key in details) {\n                if (!details.hasOwnProperty(key)) {\n                    continue;\n                }\n                storage.setLocal(key, details[key]);\n            }\n        });\n\n        chrome.tabs.create({});\n\n    } else if (details && details.reason && details.reason === 'update') {\n        updateLocalStorage();\n    }\n});\n\nchrome.browserAction.onClicked.addListener(function (tab) {\n    chrome.tabs.create({});\n});\n\nchrome.storage.onChanged.addListener((changes, namespace) => {\n\n    let key;\n    for (key in changes) {\n        if (!changes.hasOwnProperty(key)) {\n            continue;\n        }\n        _console(\"Storage Changed\" + JSON.stringify(changes[key]));\n        if (typeof changes[key].newValue !== undefined) {\n            storage.setLocal(key, changes[key].newValue);\n        } else {\n            //To handle cases when no data is present\n            storage.remove(key);\n        }\n    }\n\n});\n\nfunction getWeather(data) {\n\n    let url = 'https://api.subtletab.com/weather';\n\n    if(data.type !== 'custom'){\n        url += '?lat=' + data.lat + '&long=' + data.long + '&type=geo';\n    } else {\n        url += '?location=' + data.location + '&type=custom';\n    }\n\n    CommonUtils.http(url).then((weather) => {\n        storage.set(constants.STORAGE.WEATHER, weather)\n    });\n}\n\nfunction loadWeather(settings) {\n    let options = {};\n    if (settings.weather.location.type !== 'custom') {\n        navigator.geolocation.getCurrentPosition(\n            (position) => {\n                options = {\n                    lat: position.coords.latitude,\n                    long: position.coords.longitude,\n                    type: 'geo'\n                };\n                getWeather(options);\n            }, (error) => {\n                _console(error)\n            }, {timeout: 10000}\n        );\n    } else {\n        options = {\n            location: settings.weather.location.name,\n            type: 'custom'\n        };\n        getWeather(options);\n    }\n}\nlet weatherInterval;\n\nfunction startWeather() {\n\n    let localSettings = storage.get(constants.STORAGE.SHARED_DATA);\n    if (localSettings && localSettings.showUtilities.showWeather) {\n        if (!weatherInterval) {\n            weatherInterval = setInterval(() => {\n                if (navigator.onLine) {\n                    localSettings = storage.get(constants.STORAGE.SHARED_DATA);\n                    loadWeather(localSettings);\n                } else {\n                    stopWeather();\n                }\n            }, 900000)\n        }\n    } else {\n        stopWeather();\n    }\n}\n\nfunction stopWeather() {\n    clearInterval(weatherInterval);\n}\n\nfunction updateLocalStorage(){\n    let sharedData;\n    let miscSettings;\n    // Show onboarding with latest features\n\n    //storage.set(constants.STORAGE.SEEN_ONBOARDING, false);\n    sharedData = storage.get(constants.STORAGE.SHARED_DATA);\n    miscSettings = storage.get(constants.STORAGE.MISC_SETTINGS);\n    // Add feature of custom location in weather\n    if(sharedData && CommonUtils.isObject(sharedData)){\n        if (sharedData.weather && CommonUtils.isUndefined(sharedData.weather.location)) {\n            let storedWeather = storage.get(constants.STORAGE.WEATHER);\n            // defining object of weather\n            sharedData.weather.location = config.defaultCustomization.weather.location;\n\n            if (CommonUtils.isObject(storedWeather) && !sharedData.weather.location.name) {\n                sharedData.weather.location.name = storedWeather[4] || storedWeather.city || '';\n            }\n        }\n        if (sharedData.showUtilities && CommonUtils.isUndefined(sharedData.showUtilities.showNotes)) {\n            sharedData.showUtilities.showNotes = true;\n        }\n\n        if (sharedData.background) {\n            if (CommonUtils.isUndefined(sharedData.background.type)) {\n                sharedData.background.type = 'predefined'\n                storage.set(constants.STORAGE.BACKGROUND_CUSTOM, backgroundData.customBackgrounds)\n            }\n        }\n        storage.remove(constants.STORAGE.WEATHER);\n    }\n\n    if (miscSettings && CommonUtils.isObject(miscSettings)) {\n        miscSettings.update.isToBeFetched = true;\n        // remove this line once you send this update\n        miscSettings.update.lastChecked = '002';\n    }\n\n    storage.set(constants.STORAGE.SHARED_DATA, sharedData);\n    storage.set(constants.STORAGE.MISC_SETTINGS, miscSettings);\n}\n\nfunction init() {\n\n    chrome.runtime.setUninstallURL('https://www.subtletab.com/uninstall');\n\n    chrome.storage.sync.get(null, (data) => {\n        for (let key in data) {\n            if (!data.hasOwnProperty(key)) {\n                continue;\n            }\n            storage.setLocal(key, data[key]);\n        }\n    });\n\n    chrome.tabs.onCreated.addListener(function () {\n        prevTabsCount = tabsCount;\n        tabsCount++;\n        if (tabsCount === 2) {\n            storage.set(constants.STORAGE.SEEN_ONBOARDING, true);\n        }\n    });\n}\ninit();\n\n\n\n// WEBPACK FOOTER //\n// ./src/subtle.js","export default {\n    themes: [\n        {\n            id: 1,\n            lValue: 'Nature',\n            tags: 'nature',\n            value: 'nature',\n            imgUrl: 'images/nature_thumbnail.png'\n        },\n        {\n            id: 2,\n            lValue: 'Architecture',\n            tags: 'building',\n            value: 'building',\n            imgUrl: 'images/architecture_thumbnail.png'\n        },\n        {\n            id: 3,\n            lValue: 'Travel',\n            tags: 'travel',\n            value: 'travel',\n            imgUrl: 'images/travel_thumbnail.png'\n        },\n        {\n            id: 4,\n            lValue: 'Night Life',\n            tags: 'night',\n            value: 'night',\n            imgUrl: 'images/night_thumbnail.png'\n        },\n\n    ],\n    stored: {\n        1: {\n            1: './images/backgrounds/nature-1.jpg',\n            2: './images/backgrounds/nature-2.jpg',\n            3: './images/backgrounds/nature-3.jpg'\n        },\n        2:{\n            4: './images/backgrounds/building-1.jpg',\n            5: './images/backgrounds/building-2.jpg',\n            6: './images/backgrounds/building-3.jpg',\n        },\n        3:{\n            7: './images/backgrounds/travel-1.jpg',\n            8: './images/backgrounds/travel-2.jpg',\n            9: './images/backgrounds/travel-3.jpg',\n        },\n        4: {\n            10: './images/backgrounds/night-1.jpg',\n            11: './images/backgrounds/night-2.jpg',\n            12: './images/backgrounds/night-3.jpg',\n        },\n\n    },\n    customBackgrounds: [\n        'https://subtletab.com/extras/1.jpg',\n        'https://subtletab.com/extras/2.jpg',\n        'https://subtletab.com/extras/3.jpg',\n        'https://subtletab.com/extras/4.jpg',\n        'https://subtletab.com/extras/5.jpg',\n        'https://subtletab.com/extras/6.jpg',\n        'https://subtletab.com/extras/7.jpg',\n        'https://subtletab.com/extras/7.jpg',\n        'https://subtletab.com/extras/8.jpg',\n    ]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/backgroundData.js","export default {\n    http(url, method, data) {\n        return new Promise((resolve, reject) => {\n            let xmlhttp = new XMLHttpRequest()\n            method = method || 'GET'\n            xmlhttp.open(method, url)\n            xmlhttp.setRequestHeader('chrome-extension', btoa(chrome.runtime.id))\n            xmlhttp.onreadystatechange = function () {\n                if (xmlhttp.readyState === 4) {\n                    if(xmlhttp.responseText){\n                        resolve(JSON.parse(xmlhttp.responseText))\n                        return;\n                    }\n                    reject(xmlhttp.status)\n                }\n            }\n            xmlhttp.onerror = () => {\n                reject(xmlhttp.status)\n            }\n            xmlhttp.send(JSON.stringify(data))\n        })\n    },\n    isObject(data) {\n        return data && Object.prototype.toString.call(data) === '[object Object]'\n    },\n    isArray(data) {\n        return data && Object.prototype.toString.call(data) === '[object Array]'\n    },\n    isUndefined(data) {\n        return typeof data === 'undefined';\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/common.js","const config = {\n    defaultCustomization: {\n        showUtilities: {\n            showWeather: true,\n            showClock: true,\n            showNotes: true\n        },\n        clock: {\n            showTwelveHour: true,\n            showDay: true,\n            type: 'twelve'\n        },\n        weather: {\n            unit: 'c',\n            location: {\n                type: 'geo',\n                name : ''\n            }\n        },\n        background: {\n            themeId: 1,\n            changeInterval: 2,\n            type: 'predefined'\n        }\n    },\n    misc: {\n        update: {\n            lastChecked : '0020',\n            isToBeFetched : true,\n            isSeen: true\n        }\n    },\n    other: {\n        weather: {\n            showWeatherInfo: false\n        }\n    }\n};\nexport default config;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/config.js"],"sourceRoot":""}