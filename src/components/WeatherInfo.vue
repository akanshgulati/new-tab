<template>
    <div>
        <div class="flex font-black absolute" id="weatherInfo">
            <div id="currentWeather">
                <div class="flex flex-start">
                    <div class="relative">
                        <div class="temperature-value">{{getTemp(settings.unit, data.current.temp)}}</div>
                        <sup class="temperature-unit" v-if="this.settings.unit === 'f'">&#8457;</sup>
                        <sup class="temperature-unit" v-if="this.settings.unit === 'c'">&#8451;</sup>
                    </div>
                    <div class="ml-30 font-xsmall semi-bold flex flex-center">
                        <i class="wi" :class="'wi-'+getWeatherClass(data.current.code)"></i>
                        <span>{{data.current.text}}</span>
                    </div>
                </div>
                <div class="flex font-xsmall flex-justify-space-between flex-end mt-15 font-center">
                    <div v-if="data.current.humidity">
                        <p>
                            <svg viewBox="0 0 12 17" width="0.7rem">
                                <use xlink:href="#icon-drop"></use>
                            </svg>
                            Humid
                        </p>
                        <p class="semi-bold">{{data.current.humidity}}%</p>
                    </div>
                    <div v-if="data.current.wind">
                        <p>
                            <svg viewBox="0 0 14 12" width="1rem">
                                <use xlink:href="#icon-wind"></use>
                            </svg>
                            Wind
                        </p>
                        <p class="semi-bold">{{data.current.wind}} km/hr</p>
                    </div>
                    <div v-if="data.pollution.aqi">
                        <p>
                            <svg viewBox="0 0 14 12" width="1rem">
                                <use xlink:href="#icon-pollution"></use>
                            </svg>
                            Pollution
                        </p>
                        <p class="semi-bold">{{data.pollution.aqi}} AQI</p>
                    </div>
                </div>
            </div>
            <div class="flex flex-center" id="forecast">
                <div class="forecast-pallet" v-for="item in data.forecast">
                    <p class="semi-bold">{{item.day}}</p>
                    <p>
                        <i class="wi tooltip" :class="'wi-'+getWeatherClass(item.code)" :rel="item.text"></i>
                    </p>
                    <div class="flex font-xsmall flex-justify-space-around semi-bold">
                        <p>{{getTemp(settings.unit, item.high)}} <sup>°</sup></p>
                        <p class="font-light-black">{{getTemp(settings.unit, item.low)}} <sup>°</sup></p>
                    </div>
                </div>
            </div>
        </div>
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
             style="display: none;">
            <defs>
                <g id="icon-drop" fill-rule="nonzero" fill="#333">
                    <path d="M7.51729577,1.82901408 C7.13419718,1.2656338 6.79616901,0.747323943 6.48067606,0.274084507 C6.43560563,0.206478873 6.368,0.138873239 6.30039437,0.0938028167 C6.02997183,-0.0864788734 5.66940845,0.00366197167 5.48912676,0.274084507 C5.19616901,0.747323943 4.85814085,1.24309859 4.45250704,1.82901408 C2.67222535,4.44309859 0.0130704225,8.38676056 0.0130704225,10.6402817 C0.0130704225,12.2853521 0.689126761,13.7726761 1.7708169,14.8543662 C2.85250704,15.9135211 4.33983099,16.5895775 5.98490141,16.5895775 C7.62997183,16.5895775 9.11729577,15.9135211 10.1989859,14.831831 C11.2806761,13.7501408 11.9567324,12.2628169 11.9567324,10.6177465 C11.9567324,8.36422535 9.29757746,4.44309859 7.51729577,1.82901408 Z M9.38771831,14.0205634 C8.50884507,14.8994366 7.31447887,15.4177465 5.98490141,15.4177465 C4.65532394,15.4177465 3.46095775,14.8769014 2.58208451,14.0205634 C1.70321127,13.1416901 1.18490141,11.9473239 1.18490141,10.6177465 C1.18490141,8.72478873 3.73138028,4.96140845 5.42152113,2.46 C5.62433803,2.16704225 5.80461972,1.87408451 5.98490141,1.62619718 C6.1651831,1.87408451 6.34546479,2.16704225 6.54828169,2.46 C8.23842254,4.98394366 10.7849014,8.72478873 10.7849014,10.6177465 C10.7849014,11.9473239 10.2440563,13.1416901 9.38771831,14.0205634 Z"
                          id="Shape"></path>
                    <path d="M8.47785915,9.21211268 C8.1623662,9.18957746 7.89194366,9.43746479 7.86940845,9.75295775 C7.84687324,10.2487324 7.68912676,10.7219718 7.44123944,11.1276056 C7.19335211,11.5332394 6.83278873,11.8938028 6.40461972,12.1191549 C6.13419718,12.2769014 6.02152113,12.6374648 6.17926761,12.9078873 C6.3595493,13.2233803 6.72011268,13.3135211 6.99053521,13.1557746 C7.59898592,12.8177465 8.09476056,12.3219718 8.43278873,11.7585915 C8.79335211,11.1952113 8.99616901,10.5191549 9.01870423,9.82056338 C9.04123944,9.50507042 8.79335211,9.23464789 8.47785915,9.21211268 Z"
                          id="Shape"></path>
                </g>

                <g id="icon-wind" stroke="#333" stroke-width="1" fill="none" fill-rule="evenodd">
                    <path d="M0.379940476,4.55183649 L10.4860459,4.55183649 C11.74239,4.55183649 12.7608929,3.53047666 12.7608929,2.27591824 C12.7608929,1.01885999 11.7395331,0 10.4849746,0 C9.22791635,0 8.20905639,1.01814576 8.20905639,2.27591824 M0.710989624,6.98476989 L6.45267548,6.98476989 C7.16645515,6.98476989 7.74510769,7.56504562 7.74510769,8.2778108 C7.74510769,8.99199626 7.16483201,9.57085171 6.45206683,9.57085171 C5.73788135,9.57085171 5.15902593,8.99240204 5.15902593,8.2778108"
                          id="cloud-wind"></path>
                </g>

                <g id="icon-pollution" fill-rule="nonzero">
                    <path d="M11.5386397,3.99200212 C11.6838208,3.67177552 11.7593555,3.32337483 11.7593555,2.96640922 C11.7593555,1.5948386 10.6434928,0.47900412 9.27195039,0.47900412 C8.85804497,0.47900412 8.45636709,0.580289941 8.09633051,0.773845879 C7.62818998,0.281701029 6.98542649,0.0039609375 6.29688012,0.0039609375 C5.39942294,0.0039609375 4.57744412,0.487822607 4.13761854,1.25590441 C3.93730082,1.2048248 3.73106655,1.17901734 3.52178947,1.17901734 C2.15021886,1.17901734 1.03438437,2.29488 1.03438437,3.66642244 C1.03438437,3.92041178 1.07216582,4.16904805 1.14699617,4.408246 C0.603236409,4.87838689 0.284333984,5.5673277 0.284333984,6.29151428 C0.284333984,7.60146818 1.30220719,8.67819704 2.58855121,8.7722703 C2.58576198,8.82033528 2.58435327,8.86851296 2.58435327,8.91660612 C2.58435327,10.2881767 3.70021593,11.4040112 5.07175837,11.4040112 C5.88697541,11.4040112 6.64699943,10.9992624 7.10789922,10.345032 C7.57102477,10.810496 8.20468802,11.0790232 8.87190661,11.0790232 C10.1760848,11.0790232 11.2490102,10.0701939 11.3513103,8.79185128 C12.4690888,8.5376929 13.284334,7.53551266 13.284334,6.36657003 C13.284334,5.26947131 12.55733,4.31118629 11.5386397,3.99200212 Z M10.8595201,8.15818592 C10.7195517,8.17560432 10.6153114,8.29599383 10.6181469,8.43704237 C10.61839,8.44860062 10.618606,8.46018589 10.618606,8.47179815 C10.618606,9.48271353 9.79616044,10.3051591 8.78524507,10.3051591 C8.18586304,10.3051591 7.62307316,10.0109907 7.27980913,9.51827948 C7.22353015,9.4374797 7.1280395,9.392921 7.03028041,9.40129263 C6.93219726,9.40969127 6.84605044,9.46983202 6.8043273,9.55900343 C6.50378562,10.2015399 5.85155427,10.6166919 5.14274688,10.6166919 C4.1318315,10.6166919 3.30938592,9.79424636 3.30938592,8.78333098 C3.30938592,8.66313051 3.32121423,8.54257897 3.34446577,8.42494401 C3.36107401,8.34106563 3.33776846,8.25427068 3.28143546,8.18994412 C3.22896422,8.13007343 3.15334945,8.09601978 3.07427802,8.09601978 C3.06844488,8.09601978 3.06261174,8.09620882 3.05685962,8.09658689 C3.01519048,8.09923341 2.9763839,8.10052966 2.93814444,8.10052966 C1.92722906,8.10052966 1.10478348,7.27808408 1.10478348,6.26716871 C1.10478348,5.67923691 1.39009418,5.12268525 1.8680335,4.77844904 C1.97159872,4.70383347 2.01035129,4.56786192 1.96166078,4.44984888 C1.87011291,4.22805457 1.82366384,3.99291967 1.82366384,3.75097943 C1.82366384,2.74006405 2.64610942,1.91761847 3.6570248,1.91761847 C3.87549745,1.91761847 4.08924419,1.9556689 4.29224282,2.03066254 C4.42864645,2.08105438 4.58074015,2.01672782 4.63955763,1.88375386 C4.93318596,1.22012629 5.59162852,0.791336565 6.31693614,0.791336565 C6.88817867,0.791336565 7.41677988,1.05080323 7.76725431,1.50319555 C7.85629069,1.61821101 8.01942954,1.64410907 8.13976504,1.56236411 C8.44376339,1.35582778 8.79950385,1.24667247 9.16858491,1.24667247 C10.1795003,1.24667247 11.0019459,2.06911805 11.0019459,3.08003343 C11.0019459,3.44417252 10.8953831,3.79602422 10.6938427,4.09748408 C10.6411284,4.17633948 10.6327028,4.27677209 10.6715364,4.36332399 C10.7103429,4.44987588 10.7909807,4.51031368 10.884932,4.52338424 C11.7849638,4.64828362 12.4636873,5.42887103 12.4636873,6.33908375 C12.4638223,7.262313 11.7741076,8.0443857 10.8595201,8.15818592 Z"
                          fill="#333333"></path>
                    <g transform="translate(8.000000, 8.000000)" fill="#333">
                        <path d="M1.50901563,0.808488281 C1.33354102,0.97946875 1.10200391,1.07366797 0.856933594,1.07366797 C0.69428125,1.07366797 0.53421875,1.03129102 0.394087891,0.951158203 C0.269851563,0.880115234 0.111693359,0.923279297 0.0407011719,1.04738867 C-0.0303164062,1.17154883 0.012796875,1.32975781 0.136931641,1.40077539 C0.355240234,1.52564648 0.604195313,1.59163672 0.856933594,1.59163672 C1.23781836,1.59163672 1.59778125,1.44525977 1.87050195,1.17939453 C1.97292773,1.07955859 1.97500977,0.915611328 1.87522461,0.813185547 C1.77538867,0.710785156 1.61141602,0.708677734 1.50901563,0.808488281 Z"
                              id="Shape"></path>
                        <path d="M2.07139258,0.0156914062 C1.92897656,-0.000203125 1.80118555,0.102298828 1.78539258,0.244435547 C1.78313281,0.264621094 1.7801875,0.285060547 1.77658203,0.305195312 C1.75141992,0.445960937 1.84516211,0.580505859 1.98595313,0.605667969 C2.00136523,0.608410156 2.01670117,0.609730469 2.03180859,0.609730469 C2.15487695,0.609730469 2.26403125,0.521675781 2.28642578,0.396296875 C2.29201172,0.364990234 2.29663281,0.333150391 2.30013672,0.301691406 C2.31595508,0.159529297 2.21355469,0.031484375 2.07139258,0.0156914062 Z"
                              id="Shape"></path>
                    </g>
                </g>
            </defs>
        </svg>
    </div>
</template>
<script>
    export default {
        props: ['data', 'settings'],
        data() {
            return {
                getTemp: this.$parent.getTemp,
                getWeatherClass: this.$parent.getWeatherClass
            }
        }
    }
</script>

<style lang="css">
    #weatherInfo {
        min-width: 40rem;
        margin-left: -1rem;
        margin-top: 1rem;
    }
    #weatherInfo:before {
        bottom: 100%;
        left: 2rem;
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-bottom: 9px solid rgba(255,255,255,0.98);
    }
    #weatherInfo p{
        margin: 0;
    }
    #currentWeather {
        width: 38%;
        flex-shrink: 0;
        padding: 0.5rem;
        background: rgba(255,255,255,0.98);
        border-radius: 5px 0 0 5px;
    }
    #forecast {
        width: 100%;
        background: rgba(255,255,255,0.85);
        border-radius: 0 5px 5px 0;
    }
    .forecast-pallet:not(:first-of-type){
        border-left: 1px solid rgba(0, 0, 0, 0.1);
    }
    .forecast-pallet {
        border-left: 1px solid transparent;
        padding: 0 0.5rem;
        text-align: center;
        flex-basis: 100%;
    }
    .forecast-pallet p {
        margin-bottom: 5px !important;
    }
</style>
